<?php
/**
 * GDOLS Panel - Main Configuration File
 * Location: /etc/gdols/gdols.conf
 *
 * This file contains the main configuration settings for GDOLS Panel.
 * Keep this file secure with proper permissions: chmod 600 /etc/gdols/gdols.conf
 */

return [
    // =========================================================================
    // APPLICATION SETTINGS
    // =========================================================================
    'app' => [
        'name' => 'GDOLS Panel',
        'version' => '1.1.0',
        'environment' => 'production', // production, development, staging
        'debug' => false,
        'timezone' => 'Asia/Jakarta',
        'locale' => 'id_ID',

        // Installation paths
        'paths' => [
            'base' => '/opt/gdols-panel',
            'app' => '/opt/gdols-panel/app',
            'public' => '/opt/gdols-panel/public',
            'storage' => '/opt/gdols-panel/storage',
            'config' => '/opt/gdols-panel/config',
            'logs' => '/opt/gdols-panel/logs',
            'scripts' => '/opt/gdols-panel/scripts',
            'bin' => '/opt/gdols-panel/bin',
        ],

        // Support links
        'support' => [
            'documentation' => 'https://github.com/godimyid/gdols-panel',
            'issues' => 'https://github.com/godimyid/gdols-panel/issues',
            'discussions' => 'https://github.com/godimyid/gdols-panel/discussions',
            'donation' => 'https://ko-fi.com/godimyid/goal?g=0',
            'author' => 'GoDiMyID',
            'website' => 'https://godi.my.id',
        ],
    ],

    // =========================================================================
    // DATABASE SETTINGS
    // =========================================================================
    'database' => [
        'host' => 'localhost',
        'port' => 3306,
        'database' => 'gdols_panel',
        'username' => 'gdols_user',
        'password' => 'CHANGE_THIS_SECURE_PASSWORD',
        'charset' => 'utf8mb4',
        'collation' => 'utf8mb4_unicode_ci',
        'prefix' => 'gdols_',

        // Backup settings
        'backup' => [
            'enabled' => true,
            'path' => '/var/lib/gdols/backups/database',
            'retention_days' => 7,
            'compression' => true,
        ],
    ],

    // =========================================================================
    // REDIS SETTINGS
    // =========================================================================
    'redis' => [
        'host' => '127.0.0.1',
        'port' => 6379,
        'password' => '',
        'database' => 0,
        'timeout' => 5.0,

        // Cache settings
        'cache' => [
            'enabled' => true,
            'ttl' => 3600, // 1 hour
            'prefix' => 'gdols:',
        ],
    ],

    // =========================================================================
    // SECURITY SETTINGS
    // =========================================================================
    'security' => [
        // Application secret
        'app_key' => 'CHANGE_THIS_TO_RANDOM_32_CHAR_STRING',
        'app_id' => 'gdols-panel',

        // Session settings
        'session' => [
            'name' => 'GDOLS_SESSION',
            'lifetime' => 7200, // 2 hours
            'path' => '/var/lib/gdols/runtime/sessions',
            'cookie_secure' => true,
            'cookie_httponly' => true,
            'cookie_samesite' => 'Strict',
        ],

        // Rate limiting
        'rate_limiting' => [
            'enabled' => true,
            'driver' => 'redis', // redis, file
            'max_requests' => 60,
            'per_minute' => 1,
            'storage_path' => '/var/lib/gdols/runtime/rate_limit',
        ],

        // IP whitelist/blacklist
        'ip_filter' => [
            'whitelist' => [
                // '192.168.1.100',
                // '10.0.0.0/8',
            ],
            'blacklist' => [
                // '0.0.0.0/0',
            ],
        ],

        // Brute force protection
        'brute_force' => [
            'enabled' => true,
            'max_attempts' => 5,
            'lockout_duration' => 900, // 15 minutes
            'storage_path' => '/var/lib/gdols/runtime/brute_force',
        ],

        // CSRF protection
        'csrf' => [
            'enabled' => true,
            'token_name' => 'csrf_token',
            'lifetime' => 3600, // 1 hour
        ],

        // Encryption
        'encryption' => [
            'enabled' => true,
            'method' => 'aes-256-gcm',
            'key_path' => '/etc/gdols/.encryption_key',
        ],
    ],

    // =========================================================================
    // LOGGING SETTINGS
    // =========================================================================
    'logging' => [
        'enabled' => true,
        'path' => '/var/log/gdols/panel.log',
        'level' => 'info', // debug, info, notice, warning, error, critical, alert, emergency
        'max_files' => 10,
        'date_format' => 'Y-m-d H:i:s',

        // Log rotation
        'rotation' => [
            'enabled' => true,
            'max_size' => '10M',
            'compress' => true,
        ],
    ],

    // =========================================================================
    // SSL SETTINGS
    // =========================================================================
    'ssl' => [
        'enabled' => true,
        'certificate_path' => '/etc/ssl/certs/gdols-panel.crt',
        'private_key_path' => '/etc/ssl/private/gdols-panel.key',
        'ca_bundle_path' => '/etc/ssl/certs/ca-bundle.crt',

        // Let's Encrypt
        'lets_encrypt' => [
            'enabled' => false,
            'email' => 'admin@example.com',
            'domains' => [
                'panel.example.com',
            ],
            'renew_before' => 12, // hours before expiration
        ],

        // Auto-renewal
        'auto_renewal' => [
            'enabled' => true,
            'check_interval' => 43200, // 12 hours in seconds
        ],
    ],

    // =========================================================================
    // BACKUP SETTINGS
    // =========================================================================
    'backup' => [
        'enabled' => true,
        'path' => '/var/lib/gdols/backups',
        'retention_days' => 7,
        'compression' => true,
        'encryption' => false,

        // Schedules
        'schedules' => [
            'daily' => '0 2 * * *', // 2 AM every day
            'weekly' => '0 3 * * 0', // 3 AM every Sunday
            'monthly' => '0 4 1 * *', // 4 AM on 1st of month
        ],

        // Remote storage
        'remote_storage' => [
            's3' => [
                'enabled' => false,
                'bucket' => '',
                'region' => '',
                'access_key' => '',
                'secret_key' => '',
            ],
            'ftp' => [
                'enabled' => false,
                'host' => '',
                'username' => '',
                'password' => '',
                'path' => '',
            ],
            'ssh' => [
                'enabled' => false,
                'host' => '',
                'username' => '',
                'password' => '',
                'path' => '',
            ],
        ],

        // Backup components
        'components' => [
            'database' => true,
            'config' => true,
            'ssl_certificates' => true,
            'user_data' => true,
        ],
    ],

    // =========================================================================
    // API SETTINGS
    // =========================================================================
    'api' => [
        'version' => 'v1',
        'prefix' => '/api/v1',
        'rate_limit' => [
            'enabled' => true,
            'max_requests' => 100,
            'per_minute' => 1,
        ],
        'timeout' => 30,

        // Authentication
        'auth' => [
            'token_lifetime' => 3600, // 1 hour
            'refresh_token_lifetime' => 604800, // 7 days
            'storage_path' => '/var/lib/gdols/runtime/api_tokens',
        ],
    ],

    // =========================================================================
    // WEB SERVER SETTINGS
    // =========================================================================
    'webserver' => [
        'type' => 'openlitespeed',
        'vhost_path' => '/usr/local/lsws/vhosts/gdols-panel',
        'document_root' => '/opt/gdols-panel/public',

        // OpenLiteSpeed specific
        'openlitespeed' => [
            'admin_username' => 'admin',
            'admin_password' => 'CHANGE_THIS',
            'admin_port' => 7080,
        ],
    ],

    // =========================================================================
    // SYSTEM SERVICE SETTINGS
    // =========================================================================
    'service' => [
        'name' => 'gdols-panel',
        'user' => 'root',
        'group' => 'root',
        'working_directory' => '/opt/gdols-panel',
        'start_script' => '/opt/gdols-panel/bin/start',
        'stop_script' => '/opt/gdols-panel/bin/stop',
        'restart_script' => '/opt/gdols-panel/bin/restart',
        'status_script' => '/opt/gdols-panel/bin/status',
    ],

    // =========================================================================
    // MONITORING SETTINGS
    // =========================================================================
    'monitoring' => [
        'enabled' => true,
        'interval' => 60, // seconds

        // Alerts
        'alerts' => [
            'email' => 'admin@example.com',
            'cpu_threshold' => 80, // percentage
            'memory_threshold' => 80, // percentage
            'disk_threshold' => 80, // percentage
        ],

        // Storage
        'storage_path' => '/var/lib/gdols/runtime/monitoring',
    ],

    // =========================================================================
    // UPDATE SETTINGS
    // =========================================================================
    'updates' => [
        'enabled' => true,
        'channel' => 'stable', // stable, beta, alpha
        'check_interval' => 86400, // 24 hours
        'auto_download' => false,
        'auto_install' => false,

        // Repository
        'repository' => [
            'type' => 'github',
            'owner' => 'godimyid',
            'repo' => 'gdols-panel',
            'branch' => 'main',
        ],
    ],

    // =========================================================================
    // EMAIL SETTINGS
    // =========================================================================
    'email' => [
        'enabled' => false,
        'from' => 'noreply@example.com',
        'from_name' => 'GDOLS Panel',
        'smtp' => [
            'host' => 'smtp.example.com',
            'port' => 587,
            'username' => '',
            'password' => '',
            'encryption' => 'tls', // tls, ssl
        ],
    ],

    // =========================================================================
    // NOTIFICATION SETTINGS
    // =========================================================================
    'notifications' => [
        'email' => [
            'enabled' => false,
            'to' => 'admin@example.com',
        ],
        'slack' => [
            'enabled' => false,
            'webhook' => '',
        ],
        'telegram' => [
            'enabled' => false,
            'bot_token' => '',
            'chat_id' => '',
        ],
    ],

    // =========================================================================
    // PERFORMANCE SETTINGS
    // =========================================================================
    'performance' => [
        // Cache
        'cache' => [
            'enabled' => true,
            'driver' => 'redis', // redis, file, memcached
            'ttl' => 3600,
        ],

        // OPCache
        'opcache' => [
            'enabled' => true,
            'memory_consumption' => 128,
            'max_accelerated_files' => 10000,
        ],

        // Session handling
        'session_handler' => 'redis', // redis, file, memcached
    ],
];
